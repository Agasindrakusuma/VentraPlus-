<!-- Start Chat Bubble -->
<style>
    .chat-bubble {
        position: fixed;
        bottom: 30px;
        right: 30px;
        z-index: 999;
        font-family: sans-serif;
    }

    .chat-bubble-button {
        width: 60px;
        height: 60px;
        background-color: #0aa043;
        border-radius: 50%;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    .chat-bubble-button:hover {
        background-color: #087735;
    }

    .chat-icon {
        color: white;
        font-size: 28px;
    }

    .chat-window {
        display: none;
        position: absolute;
        bottom: 70px;
        right: 0;
        width: 340px;
        background-color: white;
        border-radius: 12px;
        box-shadow: 0 0 20px rgba(0,0,0,0.15);
        overflow: hidden;
        flex-direction: column;
    }

    .chat-bubble.open .chat-window {
        display: flex;
    }

    .chat-header {
        background-color: #0aa043;
        color: white;
        padding: 15px;
        font-weight: bold;
        font-size: 16px;
    }

    .chat-body {
        padding: 15px;
        max-height: 250px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .chat-message.incoming {
        background-color: #0aa043;
        color: white;
        border-radius: 12px;
        padding: 10px 14px;
        align-self: flex-start;
        max-width: 80%;
        display: flex;
        align-items: flex-start;
    }

    .chat-message.incoming::before {
        content: "";
        display: inline-block;
        width: 32px;
        height: 32px;
        background-image: url('https://cdn-icons-png.flaticon.com/512/4140/4140048.png');
        background-size: cover;
        border-radius: 50%;
        margin-right: 10px;
        flex-shrink: 0;
    }

    .chat-message.outgoing {
        border: 1px solid #0aa043;
        color: #0aa043;
        border-radius: 12px;
        padding: 10px 14px;
        align-self: flex-end;
        max-width: 80%;
        cursor: pointer;
        transition: background-color 0.2s;
    }

    .chat-message.outgoing:hover {
        background-color: #e6f7ed;
    }

    .chat-footer {
        border-top: 1px solid #eee;
        padding: 10px;
        display: flex;
        gap: 8px;
    }

    .chat-footer input {
        flex-grow: 1;
        padding: 8px 12px;
        border-radius: 6px;
        border: 1px solid #ccc;
    }

    .chat-footer button {
        background-color: #0aa043;
        color: white;
        border: none;
        padding: 8px 14px;
        border-radius: 6px;
        cursor: pointer;
    }
</style>

<div class="chat-bubble">
    <div class="chat-window" id="chatWindow">
        <div class="chat-header">Klinik Literasi</div>
        <div class="chat-body" id="chatBody">
            <div class="chat-message incoming">ðŸ‘‹ Hi! How can we help?</div>
            <div class="chat-message outgoing" onclick="userReply('I have a question')">I have a question</div>
            <div class="chat-message outgoing" onclick="userReply('Tell me more')">Tell me more</div>
        </div>
        <div class="chat-footer">
            <input type="text" id="userInput" placeholder="Type here and press enter.." onkeydown="handleKey(event)">
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>
    <div class="chat-bubble-button" onclick="toggleChat()">
        <i class="fas fa-comments chat-icon"></i>
    </div>
</div>

<script>
    function toggleChat() {
        const bubble = document.querySelector('.chat-bubble');
        bubble.classList.toggle('open');
    }

    function sendMessage() {
        const input = document.getElementById('userInput');
        const message = input.value.trim();
        if (message) {
            addUserMessage(message);
            input.value = '';
        }
    }

    function handleKey(event) {
        if (event.key === 'Enter') {
            sendMessage();
        }
    }

    function addUserMessage(text) {
        const chatBody = document.getElementById('chatBody');
        const msg = document.createElement('div');
        msg.className = 'chat-message outgoing';
        msg.textContent = text;
        chatBody.appendChild(msg);
        chatBody.scrollTop = chatBody.scrollHeight;
    }

    function userReply(text) {
        addUserMessage(text);
    }
</script>
<!-- End Chat Bubble -->