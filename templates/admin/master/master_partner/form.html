<form method="post" enctype="multipart/form-data" class="form" action="{% if edit %}{% url 'admin:edit_master_partner' partner.partner_id %}{% else %}{% url 'admin:tambah_master_partner' %}{% endif %}">
    {% csrf_token %}
    <div class="d-flex flex-column scroll-y px-5 px-lg-10" data-kt-scroll="true">
        <!-- Avatar -->
        

        <div class="fv-row mb-7">
            <label class="required fw-semibold fs-6 mb-2">Images</label>
            <div class="card-body pt-0">
                <div class="image-input image-input-outline" data-kt-image-input="true"
                     {% if partner.images %}style="background-image: url('{{ partner.images.url }}')"{% endif %}>
                    <div class="image-input-wrapper w-150px h-150px"
                         {% if partner.images %}style="background-image: url('{{ partner.images.url }}');"{% endif %}></div>

                    <label class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow"
                           data-kt-image-input-action="change"
                           data-bs-toggle="tooltip"
                           title="Change cover">
                        <i class="ki-outline ki-pencil fs-7"></i>
                        <input type="file" id="frm_images" name="frm_images" accept=".png, .jpg, .jpeg" />
                    </label>

                    <span class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow"
                          data-kt-image-input-action="cancel"
                          data-bs-toggle="tooltip"
                          title="Cancel cover">
                        <i class="ki-outline ki-cross fs-2"></i>
                    </span>

                    <span class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow"
                          data-kt-image-input-action="remove"
                          data-bs-toggle="tooltip"
                          title="Remove cover">
                        <i class="ki-outline ki-cross fs-2"></i>
                    </span>
                </div>
                <div class="text-muted fs-7 mt-2">Format: .png, .jpg, .jpeg</div>
            </div>
        </div>

        

        <!-- Full Name -->
        <div class="fv-row mb-7">
            <label class="required fw-semibold fs-6 mb-2">Nama</label>
            <input type="text" value="{{ partner.nama }}" name="frm_nama" class="form-control form-control-solid" placeholder="Nama Lengkap" required />
        </div>
        <div class="fv-row mb-7">
            <label class="required fw-semibold fs-6 mb-2">Judul</label>
            <input type="text" value="{{ partner.judul_patner }}" name="frm_judul" class="form-control form-control-solid" placeholder="Judul" required />
        </div>       
        <div class="fv-row mb-7">
            <label class="required fw-semibold fs-6 mb-2">URL Link</label>
            <input type="text" value="{{ partner.link }}" name="frm_link" class="form-control form-control-solid" placeholder="Link" required />
        </div>

        

        <!-- Password -->


        <!-- Role -->
        <!-- <div class="mb-5">
            <label class="required fw-semibold fs-6 mb-5">Role</label>
            <div class="form-check form-check-custom form-check-solid mb-2">
                <input class="form-check-input me-3" name="pejabat_role" type="radio" value="{{ value }}" id="role_{{ value }}" {% if forloop.first %}checked{% endif %} />
                <label class="form-check-label" for="role_{{ value }}">
                    <div class="fw-bold text-gray-800">{{ label }}</div>
                </label>
            </div>
        </div> -->

        <!-- Status -->
        <!-- <div class="fv-row mb-7">
            <label class="required fw-semibold fs-6 mb-2">Status</label>
            <input type="text" name="pejabat_status" class="form-control form-control-solid" placeholder="Aktif / Tidak Aktif" required />
        </div>
    </div> -->

    
    <!-- Submit -->
    <div class="text-center pt-10">
        <button type="reset" class="btn btn-light me-3" data-bs-dismiss="modal">Batal</button>
        <button type="submit" class="btn btn-primary">Simpan</button>
    </div>
</div>
</form>

<script>
    
    // Image preview handling
    function handleImagePreview(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const wrapper = input.closest('.image-input').querySelector('.image-input-wrapper');
                wrapper.style.backgroundImage = `url('${e.target.result}')`;
                wrapper.classList.add('image-input-wrapper-loaded');
            }
            reader.readAsDataURL(input.files[0]);
        }
    }

    document.getElementById('frm_images').addEventListener('change', function() {
        handleImagePreview(this);
    });

    if (typeof KTImageInput !== 'undefined') {
        new KTImageInput(document.querySelector('.image-input'));
    }

    document.querySelector('[data-kt-image-input-action="cancel"]').addEventListener('click', function(e) {
        e.preventDefault();
        const input = document.getElementById('frm_images');
        input.value = '';
        const wrapper = input.closest('.image-input').querySelector('.image-input-wrapper');
        wrapper.style.backgroundImage = '';
        wrapper.classList.remove('image-input-wrapper-loaded');
    });

    document.querySelector('[data-kt-image-input-action="remove"]').addEventListener('click', function(e) {
        e.preventDefault();
        const input = document.getElementById('frm_images');
        input.value = '';
        const wrapper = input.closest('.image-input').querySelector('.image-input-wrapper');
        wrapper.style.backgroundImage = '';
        wrapper.classList.remove('image-input-wrapper-loaded');
    });
</script>